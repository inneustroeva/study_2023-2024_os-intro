---
## Front matter
title: "Лабораторная работа 13"
subtitle: "Программирование в командном процессоре ОС UNIX. Ветвления и циклы"
author: "Неустроева Ирина Николаевна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Изучить основы программирования в оболочке ОС UNIX. Научится писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.


# Задание 

1. Используя команды getopts grep, написать командный файл, который анализирует командную строку с ключами:

– -iinputfile — прочитать данные из указанного файла;
– -ooutputfile — вывести данные в указанный файл;
– -pшаблон — указать шаблон для поиска;
– -C — различать большие и малые буквы;
– -n — выдавать номера строк.

а затем ищет в указанном файле нужные строки, определяемые ключом -p.

2. Написать на языке Си программу, которая вводит число и определяет, является ли оно больше нуля, меньше нуля или равно нулю. Затем программа завершается с помощью функции exit(n), передавая информацию в о коде завершения в оболочку. Командный файл должен вызывать эту программу и, проанализировав с помощью команды $?, выдать сообщение о том, какое число было введено.

3. Написать командный файл, создающий указанное число файлов, пронумерованных последовательно от 1 до N (например 1.tmp, 2.tmp, 3.tmp,4.tmp и т.д.). Число файлов, которые необходимо создать, передаётся в аргументы командной строки. Этот же командный файл должен уметь удалять все созданные им файлы (если они существуют).

4. Написать командный файл, который с помощью команды tar запаковывает в архив все файлы в указанной директории. Модифицировать его так, чтобы запаковывались только те файлы, которые были изменены менее недели тому назад (использовать команду find).


# Выполнение лабораторной работы 

1. Используя команды getopts grep, написать командный файл, который анализирует командную строку с ключами:
– -iinputfile — прочитать данные из указанного файла;
– -ooutputfile — вывести данные в указанный файл;
– -pшаблон — указать шаблон для поиска;
– -C — различать большие и малые буквы;
– -n — выдавать номера строк.
а затем ищет в указанном файле нужные строки, определяемые ключом -p.

Создадим файл для скрипта, введём в него код (предварительно присвоив ему право на исполнение с помощью команды chmod)  (рис. [-@fig:001]).

![Создание файла](image/1.jpg){#fig:001 width=70%}

Вызовем файл на исполнение (рис. [-@fig:002]).

![Исполнение](image/2.jpg){#fig:002 width=70%}

Прилагаю скрипт (рис. [-@fig:003]).

![Скрипт](image/4.jpg){#fig:003 width=70%}

Проверим работу данного файла (рис. [-@fig:004]). (рис. [-@fig:005]).

![Проверка работы](image/3.jpg){#fig:004 width=70%}


2. Написать на языке Си программу, которая вводит число и определяет, является ли оно больше нуля, меньше нуля или равно нулю. Затем программа завершается с помощью функции exit(n), передавая информацию в о коде завершения в оболочку. Командный файл должен вызывать эту программу и, проанализировав с помощью команды $?, выдать сообщение о том, какое число было введено. (рис. [-@fig:005]).

Создаём файл для скрипта и файл для программы на языке Си, присваиваем командному файлу право на исполнение, вызываем его.Далее пишем программу на языке Си

![Скрипт Си](image/5.jpg){#fig:005 width=70%}

Теперь пишем скрипт в командном файле. (рис. [-@fig:006]).

![Скрипт](image/6.jpg){#fig:006 width=70%}

* Проверим работу данного файла (рис. [-@fig:007]).

![Проверка работы](image/7.jpg){#fig:007 width=70%} 

3. Написать командный файл, создающий указанное число файлов, пронумерованных последовательно от 1 до N (например 1.tmp, 2.tmp, 3.tmp,4.tmp и т.д.). Число файлов, которые необходимо создать, передаётся в аргументы командной строки. Этот же командный файл должен уметь удалять все созданные им файлы (если они существуют).

Для начала создаём командный файл, присваиваем ему право на исполнение. Проверяем, корректно ли отработал код. В домашнеё папке должны создаться 7 файла при вызове командного файла на исполнение и передаче ему 7 в качестве аргумента  (рис. [-@fig:008]).

![Создание 7 файлов](image/8.jpg){#fig:008 width=70%}

Пишем скрипт (рис. [-@fig:009]).

![Скрипт](image/9.jpg){#fig:009 width=70%}

Теперь проверим, удалит ли файлы наш скрипт (при вызове командного файла на исполнение и передаче ему 2 в качестве аргумента созданные только что файлы должны быть удалены)(рис. [-@fig:010]).

![Проверка](image/10.jpg){#fig:010 width=70%}

4. Написать командный файл, который с помощью команды tar запаковывает в архив все файлы в указанной директории. Модифицировать его так, чтобы запаковывались только те файлы, которые были изменены менее недели тому назад (использовать команду find).

Пишем скрипт (рис. [-@fig:011]).

![Скрипт](image/11.jpg){#fig:011 width=70%}

Проверяем его работу (рис. [-@fig:012]).

![Проверка работы](image/12.jpg){#fig:012 width=70%}

# Вывод

В данной работе мы изучили основы программирования в оболочке ОС UNIX/Linux. Научились писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

::: {#refs}
:::
